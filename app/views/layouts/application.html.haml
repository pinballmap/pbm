<!DOCTYPE html>
%html
  %head
    %title #{(defined? @region) ? @region.full_name : ''} Pinball Map
    %meta{:name => "keywords", :content => "pinball, map, google map" }
    %meta{:name => "description", :content => "Welcome to the #{(defined? @region) ? @region.full_name : ''} Pinball Map. This site is a user-powered map of all the public pinball machines." }
    = stylesheet_link_tag 'style', 'jquery.ui.all', 'jquery.jscrollpane', 'facebox', 'highslide', 'highslide-ie6'
    = javascript_include_tag 'jquery', 'jquery-ui-1.8.5.custom.min', 'jQuery.scrollSomething-1.0.0', 'rails', 'application', 'jquery.form', 'jquery.remotipart', 'jquery.mousewheel', 'jquery.jscrollpane', 'facebox', 'highslide.min'
    = csrf_meta_tag
    = javascript_include_tag 'http://maps.google.com/maps/api/js?sensor=true'
    %link{:rel => 'shortcut icon', :href => '/images/favicon.ico', :type => 'image/x-icon'}/

  #page
    = render :partial => 'pages/header'
    .clear

    %body{ :onload => "switchSection('location'); #{params['by_location_id'] ? "initSearch('#{@region.name.downcase}', #{params['by_location_id']});" : ""}" }
      %p.notice= notice
      %p.alert= alert

      = yield

:javascript
  $(function () {
    $.facebox.settings.closeImage = '/images/facebox/closelabel.png'
    $.facebox.settings.loadingImage = '/images/facebox/loading.gif'

    hs.registerOverlay({
      html: '<div class="closebutton" onclick="return hs.close(this)" title="Close"></div>',
      position: 'top right',
      fade: 2
    });

    hs.graphicsDir = '/images/highslide/graphics/';
    hs.wrapperClassName = 'borderless';
  });
