#map_canvas
  .mask
    .closest_button   
      %span.bold{:onclick => "findClosestLocations('#{@region ? @region.name : 'regionless'}')"}
        = link_to 'Click here to find the closest pinball machines!', '#', {:id => 'find_closest_locations'}

- lat = local_assigns.has_key?(:lat) ? lat : @region.lat
- lon = local_assigns.has_key?(:lon) ? lon : @region.lon

:javascript
  map = new mapboxgl.Map({
    container: 'map_canvas',
    style: 'https://mapserver.pinballmap.com/styles/klokantech-basic/style.json',
    center: [#{lon}, #{lat}],
    zoom: 12
  });
  map.addControl(new mapboxgl.NavigationControl(), 'top-left');
