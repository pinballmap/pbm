%div[l, :desc_show]
  %span.location_actual_description= (l.description.to_s == '') ? '' : l.description 
  .clear
%div[l, :desc_edit]{:style => 'display:none'}
  = form_tag update_desc_locations_path(:action => 'update_desc', :id => l.id, :region => @region.name), :id => "update_desc_#{l.id}", :method => 'get' do
    = hidden_field_tag :id, l.id
    = text_area_tag "new_desc_#{l.id}", (l.description.to_s == '') ? 'Update location description/hours/etc' : l.description, :cols => 20, :rows => 3, :class => 'edit_mode'
    %br/
    = submit_tag 'Save', :class => "save_button", :id => "save_desc_#{l.id}"
  = submit_tag 'Cancel', :id => "desc_cancel_#{l.id}", :class => "cancel_button"
%div{id: "confirm_location_#{l.id}", :class => "confirm_location"}
  %div{:class => "confirm_location_button", :id => "confirm_location_button_#{l.id}"}
    =image_tag('confirm.png', :alt => 'Confirm Location is Up To Date')
  %span{:id => "last_updated_location_#{l.id}"} #{l.date_last_updated ? "Location last updated: #{l.date_last_updated}" : ''}

:javascript
  $('#confirm_location_button_#{l.id}').click(function () {
    $.get('/#{params[:region]}/locations/#{l.id}/confirm', {}, function(data) {
      updateLocationUpdatedText(#{l.id}, '#{params[:region]}');
    });
  });

  $('#update_desc_#{l.id}').submit(function () {
    $('#desc_location_#{l.id}').html(loadingHTML());

    var form = $(this);
    $.get(form.attr('action'), form.serialize(), function (data) {
      $('#desc_location_#{l.id}').load('/#{params[:region]}/locations/#{l.id}/render_desc');
    });

    return false;
  });

  $('#desc_cancel_#{l.id}, #desc_show_location_#{l.id}, .location_description .comment_image').click(function () {
    $('#desc_show_location_#{l.id}').toggle();
    $('#desc_edit_location_#{l.id}').toggle();
  });
